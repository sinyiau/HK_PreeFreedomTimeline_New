/* style.css - 全新開始：單欄 + 動態側邊資訊佈局 */

/* 1. 全域 box-sizing 重設 */
*, *::before, *::after {
    box-sizing: border-box;
}

/* 2. Body 基本樣式 */
body {
    margin: 0;
    padding: 0;
    font-family: 'Lora', serif; /* 全站基礎字體改為 Lora */
    font-weight: 400; /* 內文預設使用常規字重 */
    line-height: 1.7; /* 襯線字體通常需要稍大行高 */
    background-color: #222222; /* 主背景色 */
    color: #f0f0f0; /* 主要文字顏色 */
}

/* 3. 頁首 (Header) 樣式 */
header {
    background-color: #222222;
    padding: 3em 1em 2em 1em; /* 調整padding */
    text-align: center;
    color: #f0f0f0;
    margin-bottom: 3em; /* header與下方主內容的間距 */
}

header h1 {
    margin: 0 0 0.2em 0;
    font-family: 'Lora', serif; /* 字體 */
    font-weight: 700; /* 粗體 */
    font-size: 2.5em; /* 可按需調整 */
    color: #ffffff;
    line-height: 1.2;
}

header h2 { /* 用於副標題，例如年份範圍 */
    font-size: 1.5em;
    font-weight: 400; /* 常規字重 */
    color: #bbbbbb;
    margin: 0 0 0.5em 0;
    font-style: italic;
}

p.byline { /* 為 <p class="byline"> 設定樣式 */
    font-size: 0.9em;
    color: #aaaaaa;
    margin-top: 1em;
}

/* 4. 主要故事內容欄 (.main-story-column) */
.main-story-column {
    max-width: 900px;  /* 主內容欄最大寬度 */
    margin: 0 auto;    /* 在頁面上水平置中 */
    padding: 0 20px;   /* 左右內邊距 */
    border: 1px dotted red !important; /* 除錯：主內容欄邊界 */
}

/* 5. 每個事件/年份的內容區塊 (.content-block) */
.content-block {
    display: flex; /* 使用Flexbox來排列側邊資訊和敘事內容 */
    position: relative; /* 為內部絕對/固定定位的元素提供參考 */
    margin-bottom: 80px; /* 區塊之間的垂直間距 */
    padding: 10px 0; /* 區塊本身的上下內邊距 */
    border: 1px dashed yellow !important; /* 除錯：每個事件區塊的邊界 */
}

/* 6. 動態側邊資訊佔位符 (.dynamic-side-info) */
.dynamic-side-info {
    flex-shrink: 0; /* 不收縮 */
    width: 120px;   /* 側邊資訊固定寬度 (可調整) */
    opacity: 0;     /* 初始隱藏 */
    visibility: hidden;
    transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    /* 除錯：加上背景色和邊框方便觀察 */
    background-color: rgba(255, 255, 0, 0.05);
    border: 1px solid rgba(255, 255, 0, 0.2);
    padding: 10px;
    position: sticky; /* 讓它在 .content-block 內部滾動時固定 */
    top: 80px;       /* 固定在距離 .content-block 頂部80px的位置 (可調整) */
    align-self: flex-start; /* 頂部對齊 */
    height: fit-content; /* 高度自適應內容，或可設 max-height */
}

.dynamic-side-info.left-info {
    margin-right: 25px; /* 左側資訊與敘事內容的間距 */
    /* order: -1; /* 如果想讓它在HTML結構中靠後，但在視覺上靠左，可以用order */
}

.dynamic-side-info.right-info {
    margin-left: 25px; /* 右側資訊與敘事內容的間距 */
}

.dynamic-side-info.is-visible {
    opacity: 1;
    visibility: visible;
}

/* 側邊資訊內部文字樣式 (例如年份顯示) */
.dynamic-side-info .year-display { /* 假設你在 .dynamic-side-info.left-info 裡面放這個 */
    font-family: 'Lora', serif;
    font-size: 2.5em; /* 可調整 */
    font-weight: 700;
    color: #ffffff;
    text-align: center;
}
/* 側邊資訊內部排名顯示 (你可以為排名創建類似的class) */
.dynamic-side-info .rank-display-large {
    font-family: 'Lora', serif;
    font-size: 2.5em;
    font-weight: 700;
    color: #ffffff;
    text-align: center;
}
.dynamic-side-info .rank-display-small {
    font-family: 'Lora', serif;
    font-size: 0.8em;
    color: #bbbbbb;
    text-align: center;
    margin-top: 5px;
}


/* 7. 敘事內容區 (.narrative-content) */
.narrative-content {
    flex-grow: 1; /* 佔據 .content-block 中剩餘的空間 */
    min-width: 0; /* 幫助flex item在內容過多時正確收縮 */
    border: 1px dashed cyan !important; /* 除錯：敘事內容區邊界 */
}

.narrative-content h3 { /* 每個事件區塊的主標題 */
    font-family: 'Lora', serif;
    font-weight: 700;
    font-size: 2em; /* 可調整 */
    color: #ffffff;
    margin-top: 0;
    margin-bottom: 1em;
}

.narrative-content h4 { /* 新增的子標題樣式 */
    font-family: 'Lora', serif;
    font-weight: 700;
    font-size: 1.3em; /* 比h3小一點 */
    color: #e0e0e0; /* 顏色可以稍淺 */
    margin-top: 1.5em;
    margin-bottom: 0.5em;
}

.narrative-content p {
    margin-bottom: 1em;
    font-size: 1em; /* Lora字體可能需要1em或1.1em來保證易讀性 */
    color: #f0f0f0;
}

/* 圖片滿版效果 (需要 .narrative-content 有內邊距才需要負邊距) */
/* 我們先不加 .narrative-content 的內邊距，圖片直接100%寬 */
.content-image-container {
    margin: 1.5em 0; /* 上下邊距 */
}
.content-image-container img {
    width: 100%;
    max-width: 100%;
    height: auto;
    display: block;
    border-radius: 4px; /* 圖片可以有圓角 */
}
.image-source {
    font-size: 0.75em;
    color: #bbbbbb;
    text-align: right;
    margin-top: 0.5em;
    font-style: italic;
}

/* 8. 註腳式連結樣式 */
.source-link {
    font-size: 0.7em; /* 襯線字體下的註腳可以小一點 */
    vertical-align: super;
    margin-left: 2px;
    text-decoration: none;
    color: #8ab4f8;
    padding: 0 1px;
}
.source-link:hover {
    text-decoration: underline;
    color: #99c1f9;
}

/* 9. 頁尾 */
footer {
    /* ... 樣式已在前面定義 ... */
}